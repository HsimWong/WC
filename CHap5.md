# 5	创建动态刺激（文本展示以及运动刺激）
#### 学习目标：
在PsychoPy中，你可以用时间函数连续地展示刺激。例如，你可以让刺激“跳动”起来，引起年幼被试的兴趣。或者，你也可以让这些刺激逐渐地出现。再次我们将以多种方式学习如何用时间函数来控制刺激。

<p></p>
本章节中，我们将介绍一种刺激性质的概念。这种刺激性质可以在诗词的每一帧中被刷新。有了这些动态的性质，你可以以时间函数的形式，改变刺激的大小、朝向和位置。与之前的章节中仅创建单个实验所不同的是，本章节中我们将使用多个样例。我们将创建一些示例来展示效果，例如让文本逐渐展示、旋转，以及延展图片，制造一个跳动的心脏！
<p></p>
为了让这些能够变化的平滑、好看，一点点高中数学知识将会非常有用。所以我们在附录A当中附上了复习内容。
<p></p>
我们同样也应该注意到，创建动态刺激对于大多数任务来说并不是*必要*的。通常情况下这被认为是非常奢侈的——有些许炫耀的嫌疑——可是一旦你了解到，在每一帧当中展示的东西*可以*被做一些改变，这就为你提供了创建实验的新的可能性。如果我们介绍的内容的编程水平不适合你，请你不要担心——你可以不去使用它，就呈现一些更加“标准的”刺激就好了。
## 5.1 *动态*是什么意思？它为什么会有用？
相比较其他许多相似的软件包来说，PsychoPy的不寻常之处在于它将时间作为实验结构的中心。这样做的目的是物体能够一起或者独立地出现或者消失。因此，在一个PsychoPy的动作组中，其表现方式如同一个轨道编辑器，正如你在视频或音频软件里看到的那样。请考虑“延迟样本匹配”（delayed match-to-sample）任务的设计。在这个设计中你会呈现一个*样本*图像，而一段延迟后悔紧跟着几个选项，包括*目标（target）*和*陪衬（foil）*。其中，只有目标和样本相同。每个试次都会由你的注视点开始。其中，注视点应该在500 ms处出现来提示被试。在试次剩下的时间里，注视点都应该保持可见。*样本*可能出现在注视点的上方，然后紧接着马上消失。经过一小段暂停之后，应该同时出现一对刺激，并且在被试做出决定前保持可见。在PsychoPy里，这个试次的即时输出将会非常清晰（请看图5-1）
<p></p>
时间轴试图仅仅显示了刺激的时间安排。例如，我们不能从视图中看出目标和陪衬将在相对于注视点上空间的那个位置出现。为了找出其空间安排（以及其他显示设置，例如颜色和朝向），我们需要点击刺激图标来查看其属性。
#### 情报信息：其他的软件包是如何操作的？
与PsychoPy相反，许多软件包将一个试次更多地看作为一张幻灯片，而不是带有轨道的视频。这就意味着，你看到的是一连串受试者将要在屏幕上看到的图像。实验中物体同时出现或者消失的地方，这将会非常方便。然而在许多研究中，刺激并不是同时出现或者消失的。这就意味着一个试次将会需要很多幻灯片来表示。举个例子，在延迟样本匹配中，试次可能在前固定阶段（pre-fixation period）需要一张幻灯片，而在注视点单独出现需要另一张幻灯片，在注视点和*样本*图像都出现后还需要一张幻灯片，然后在回到只有一个注视点的哪一张，最后一张是注视点外加目标和陪衬刺激。一连串的幻灯片这种方法的有点事其空间设计在每一个幻灯变种更容易地被可视化，而其缺点是它的时间组织很难被确定。
<p></p>
因为PsychoPy是一时间作为实验设计为中心的，所以它也让你能*基于*时间来控制刺激。你已经看到了，我们可以将大多数组件参数设置为“每次重复时更新”。例如我们可以诚信一张图片在每一个试次中都有变化。但是大多数刺激参数同样可以“每一帧进行刷新”（在每一次显示器进行物理刷新的时候）。这就意味着图片可以在试次*期间*平滑地运动（例如移动）。在每次屏幕刷新的时候，参数的值都会被检查，而且可以被改变为新的值。同样地，因为PsychoPy使用硬件加速图形（hardware-accelerated graphics）（即繁重的工作是由显卡（graphics card）上专用的处理器完成的），大多数的变化将会被非常迅速地实施，所以在实验当中连续地操纵刺激，通常情况下不会对实验的计时的保真度（timing fidelity）产生损坏。
<p></p>对于现在来说，有一件要解决的事情：如果这些变化通常以60Hz的频率发生（大多是显示器每秒钟更新60次），这就意味着你需要提供好些数值来满足它的更新需求。而把这些数值敲进条件文件，正如我们在之前的章节中做的那样，将会话费很长时间。在普通的显示器上，每秒钟的刺激呈现我们将需要60行条件文件！幸运的是，PsychoPy有一个强大的替代方法来刷一点花招：你可以通过使用等式（或者任何原生Python代码）来指定数值作为PsychoPy刺激的参数。这就让你可以通过数学表达式，或者对事件的回应，来控制刺激。例如，你可以让图像位置的确定取决于时间，或者让反馈声音的音调与按钮按下的次数相关。
## 5.2 在参数中插入代码
当你学习过如何在PsychoPy中创建基础实验后，你会发现在参数中插入```$```符号会告诉PsychoPy跟在其后面的是一个变量的名称，而不是简单地一段文本。你可能会认为，是“```$```告诉了PsychoPy这是一个变量的名称”。而事实要比这宽泛得多。它告诉PsychoPy“这个文本框里面包含的是Python代码”，而你写的变量名又是Python中是有效的代码，那么它就被翻译成了变量名

### 让我们开始动手吧！
那么现在让我们将刺激的位置改变。为了做这件事，我们应该让其位置根据当前动作组的时间来更新。在所有的Builder实验中，都会有一个非常有用的变量叫做```t```。它提供了当前动作组（无论是什么动作组）从开始到现在的秒数。我们在流程上用单个动作组创建一个实验，在这个动作组上增加文本组件。现在我们可以将文字组件的位置进行设置，例如```(t,0)```，并且通过使用设置右方的下拉菜单，让其在**每一帧**进行更新。刺激的位置是由一对由括号括起来的一对数值控制的。这对数值对应值其*x*和*y*坐标。所以```(t, 0)```意味着刺激的水平位置被设置为```t```，而它随着时间的变化而变化。而他的垂直位置停留在```y=0```（也就是中垂线）。所以当动作组开始的时候，刺激将会出现在屏幕的中央```(0, 0)```。一秒钟之后它将会在```(1, 0)```的位置。这在归一化单位中在屏幕的右手端，但是在垂直方向上仍然是在中央的。两秒钟之后它的位置将会在```(2, 0)```，而这个位置在归一化单位中超出了屏幕范围，所以并不可见（关于单位的更进一步信息请参见第十一章节）。
<p></p>
在这个例子中，你可以简单滴通过操纵```t```的数值来增加或者减慢你的刺激的速度。如果你讲位置设置为```(t * 0.25, 0)```，那么你的刺激将会以之前的四分之一的速度移动，花费四秒钟的时间运动到右手边的边缘位置，即```(4 * 0.25, 0)```。你也可以改变开始的位置，只需要增加或者减小数值。例如，表达式```(-1 + t * 0.5, 0)```将会使得刺激从左手边屏幕的边缘(1, 0)开始向右，以每秒钟0.5个单位移动移动。
<p></p>
移动的速率取决于刺激的```单位```设置。默认情况下，每个刺激的这个参数都被设置为*归一化*的（事实上，默认的刺激单位是从实验设置继承来的，而实验设置又是从PsychoPy的偏好里继承的*归一化*这个默认情况）。你可能发现，将刺激的单位设置为*像素*会更加直观，这样一来速度（由```t```来控制）的单位会变成*像素每秒*。所以在一秒钟之后，位置设置为```(t, 0)```、单位设置为```像素```的刺激，只会向右运动到中心偏右的一个像素的位置，而使用**归一化**单位的刺激将会一直移动到屏幕右手边的边缘位置。如果你讲单位改变为使用像素，请不要忘记也要将尺寸设置（或者，文字组件字母高度）改变为以像素为单位的合适的数值。要不然，你可能会发现自己看不到刺激了。这是因为你将它画得比一个像素还要小！
<p></p>
## 5.3	例1：逐渐揭示文本
通过使用让物体移动的技巧，创建一个效果来给被试逐渐显示一句话将会变得非常简单。也许，你想要精确控制句子显示给被试时的速率吧？
<p></p>为了做这件事，我们可以先使用文字对象来来绘制我们的句子（而它可以在每个试次中根据条件文件而改变，正如之前的例子一样）。在此之后，我们只需要在其上方绘制绘制掩膜（mask），逐渐地将其移除以展示在其下方的文本刺激。
<p></p>
我们来创建一个实验，其中要包含一个动作组和一个文字组件。文字组件里面要有一些句子作为文本，而它需要足够长，这样我们才能看出来它在逐渐地揭示。但是也不要太长，应该让它合适于屏幕宽度。像“被试何时能明白句子的意思？”这句就比较何时。现在，在屏幕上的文字大约占据了并木的一般大小（在使用归一化单位的情况下），但是我们想让